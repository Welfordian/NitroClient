<div *ngIf="visible" [bringToTop] [draggable] class="nitro-avatar-editor card">
    <div class="drag-handler d-flex justify-content-between align-items-center px-3 pt-3">
        <h6 class="m-0">{{ ('avatareditor.title') | translate }}</h6>
        <button type="button" class="close" (click)="hide()"><i class="fas fa-times"></i></button>
    </div>
    <div class="row p-3">
        <div class="col d-flex flex-column">
            <div class="btn-group">
                <button type="button" *ngFor="let category of categories.getValues()" class="btn btn-secondary btn-sm" [ngClass]="{ 'active': (activeCategory === category) }" (click)="selectCategory(category.name)">{{ ('avatareditor.category.' + category.name) | translate }}</button>
            </div>
            <div *ngIf="activeCategory" class="d-flex flex-column" nitro-avatar-model-viewer-component [model]="activeCategory" [gender]="gender"></div>
        </div>
        <div *ngIf="figureData" class="col-4 d-flex flex-column">
            <div class="d-flex position-relative flex-grow-1 justify-content-center">
                <div class="avatar-spotlight position-absolute"></div>
                <div class="avatar-shadow position-absolute"></div>
                <div class="d-flex justify-content-center position-absolute w-100 h-100 avatar-container" nitro-avatar-image [figure]="figureData.view.figureString" [direction]="figureData.direction" [scale]="2"></div>
                <div class="arrow-container">
                    <i class="icon arrow-left-icon" (click)="rotateAvatar(figureData.direction + 1)"></i>
                    <i class="icon arrow-right-icon" (click)="rotateAvatar(figureData.direction - 1)"></i>
                </div>
            </div>
            <div class="btn-group mb-1">
                <button type="button" class="btn btn-sm btn-secondary" (click)="resetFigure()"><i class="fas fa-undo"></i></button>
                <button type="button" class="btn btn-sm btn-secondary" (click)="clearFigure()"><i class="fas fa-trash"></i></button>
            </div>
            <button type="button" class="btn btn-sm btn-success mb-1" (click)="saveFigure()">{{ ('avatareditor.save') | translate }}</button>
        </div>
        <div *ngIf="figureData" nitro-avatar-wardrobe-component class="col-12 nitro-avatar-wardrobe-component mt-1" [figureData]="figureData"></div>
    </div>
</div>
